---
title: useKeyboardEvent
description: ç”¨äºå¤„ç†é”®ç›˜äº‹ä»¶çš„ React Hook
---

import { KeyboardEventExample } from '@/components/examples';

# useKeyboardEvent

ç”¨äºå¤„ç†é”®ç›˜äº‹ä»¶çš„ React Hookï¼ŒåŸºäº useEventListener å°è£…ï¼Œæä¾›ç®€æ´çš„ API æ¥ç›‘å¬é”®ç›˜æŒ‰é”®äº‹ä»¶ï¼Œæ”¯æŒç‰¹å®šæŒ‰é”®è¿‡æ»¤ï¼Œå¸¸ç”¨äºå¿«æ·é”®ã€æ¸¸æˆæ§åˆ¶ã€è¡¨å•å¯¼èˆªç­‰åœºæ™¯ã€‚

## åœ¨çº¿æ¼”ç¤º

<KeyboardEventExample />

## åŸºæœ¬ç”¨æ³•

```tsx tab="React å‡½æ•°ç»„ä»¶"
import { useKeyboardEvent } from 'arrow-hooks'
import { useState } from 'react'

function App() {
  const [lastKey, setLastKey] = useState('')
  const [keyHistory, setKeyHistory] = useState<string[]>([])

  // ç›‘å¬æ‰€æœ‰æŒ‰é”®æŒ‰ä¸‹
  useKeyboardEvent('keydown', (e) => {
    setLastKey(e.key)
    setKeyHistory(prev => [...prev.slice(-9), e.key])
  })

  // ç›‘å¬ç‰¹å®šæŒ‰é”® - Escape
  useKeyboardEvent('keydown', () => {
    setKeyHistory([])
    setLastKey('')
  }, 'Escape')

  return (
    <div style={{ padding: '1rem' }}>
      {/* æœ€åæŒ‰ä¸‹çš„é”® */}
      <div style={{ marginBottom: '1.5rem' }}>
        <h4>âŒ¨ï¸ æœ€åæŒ‰ä¸‹çš„é”®</h4>
        <div style={{
          padding: '1rem',
          backgroundColor: '#f0f8ff',
          border: '2px solid #1890ff',
          borderRadius: '8px',
          textAlign: 'center',
          fontSize: '1.5rem',
          fontFamily: 'monospace',
          minHeight: '60px',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center'
        }}>
          {lastKey || 'æŒ‰ä»»æ„é”®å¼€å§‹'}
        </div>
      </div>

      {/* æŒ‰é”®å†å² */}
      <div style={{ marginBottom: '1.5rem' }}>
        <h4>ğŸ“œ æŒ‰é”®å†å² (æœ€è¿‘10ä¸ª)</h4>
        <div style={{
          padding: '1rem',
          backgroundColor: '#fff7e6',
          border: '1px solid #ffd591',
          borderRadius: '4px',
          minHeight: '60px',
          display: 'flex',
          alignItems: 'center',
          flexWrap: 'wrap',
          gap: '0.5rem'
        }}>
          {keyHistory.length === 0 ? (
            <span style={{ color: '#999' }}>æš‚æ— æŒ‰é”®å†å²</span>
          ) : (
            keyHistory.map((key, index) => (
              <span
                key={`${key}-${index}`}
                style={{
                  padding: '0.25rem 0.5rem',
                  backgroundColor: '#fa8c16',
                  color: 'white',
                  borderRadius: '4px',
                  fontSize: '0.875rem',
                  fontFamily: 'monospace',
                  opacity: 0.6 + (index / keyHistory.length) * 0.4
                }}
              >
                {key}
              </span>
            ))
          )}
        </div>
      </div>

      {/* å¿«æ·é”®ç¤ºä¾‹ */}
      <div>
        <h5>âš¡ ç‰¹æ®ŠåŠŸèƒ½</h5>
        <div style={{
          padding: '1rem',
          backgroundColor: '#f9f0ff',
          border: '1px solid #d3adf7',
          borderRadius: '4px'
        }}>
          <div style={{ marginBottom: '0.5rem' }}>
            <strong>Escape</strong> - æ¸…é™¤æ‰€æœ‰è®°å½•
          </div>
          <div style={{ fontSize: '0.875rem', color: '#666' }}>
            æŒ‰ä¸‹ ESC é”®å¯ä»¥æ¸…é™¤æŒ‰é”®å†å²å’Œå½“å‰æŒ‰ä¸‹çš„é”®
          </div>
        </div>
      </div>

      <div style={{ marginTop: '1rem', fontSize: '0.875rem', color: '#666' }}>
        ğŸ’¡ åœ¨æ­¤é¡µé¢æŒ‰ä»»æ„é”®è¯•è¯•ï¼Œè§‚å¯Ÿå„ç§é”®ç›˜äº‹ä»¶çš„å®æ—¶å“åº”
      </div>
    </div>
  )
}
```

## å…¶ä»–åœºæ™¯

### 1. ç‰¹å®šæŒ‰é”®ç›‘å¬

ç›‘å¬ç‰¹å®šçš„æŒ‰é”®äº‹ä»¶ï¼š

```tsx
import { useKeyboardEvent } from 'arrow-hooks'
import { useState } from 'react'

function ShortcutExample() {
  const [message, setMessage] = useState('')

  // ç›‘å¬ Escape é”®
  useKeyboardEvent('keydown', () => {
    setMessage('æŒ‰ä¸‹äº† ESC é”® - æ¸…é™¤æ“ä½œ')
    setTimeout(() => setMessage(''), 2000)
  }, 'Escape')

  // ç›‘å¬ Enter é”®
  useKeyboardEvent('keydown', () => {
    setMessage('æŒ‰ä¸‹äº† Enter é”® - ç¡®è®¤æ“ä½œ')
    setTimeout(() => setMessage(''), 2000)
  }, 'Enter')

  // ç›‘å¬ç©ºæ ¼é”®
  useKeyboardEvent('keydown', () => {
    setMessage('æŒ‰ä¸‹äº†ç©ºæ ¼é”® - æ’­æ”¾/æš‚åœ')
    setTimeout(() => setMessage(''), 2000)
  }, ' ')

  return (
    <div style={{ padding: '2rem', textAlign: 'center' }}>
      <h3>å¿«æ·é”®æ¼”ç¤º</h3>
      <p>å°è¯•æŒ‰ä¸‹ ESCã€Enter æˆ–ç©ºæ ¼é”®</p>
      {message && (
        <div style={{
          padding: '1rem',
          backgroundColor: '#e6f7ff',
          borderRadius: '4px',
          marginTop: '1rem'
        }}>
          {message}
        </div>
      )}
    </div>
  )
}
```

### 2. å¿«æ·é”®ç»„åˆ

å®ç°å¤æ‚çš„é”®ç›˜å¿«æ·é”®ç»„åˆï¼š

```tsx
import { useKeyboardEvent } from 'arrow-hooks'
import { useState, useEffect } from 'react'

function ShortcutManager() {
  const [pressedKeys, setPressedKeys] = useState<Set<string>>(new Set())
  const [lastShortcut, setLastShortcut] = useState('')

  // è®°å½•æŒ‰ä¸‹çš„é”®
  useKeyboardEvent('keydown', (e) => {
    setPressedKeys(prev => new Set([...prev, e.key]))
  })

  // è®°å½•é‡Šæ”¾çš„é”®
  useKeyboardEvent('keyup', (e) => {
    setPressedKeys(prev => {
      const newSet = new Set(prev)
      newSet.delete(e.key)
      return newSet
    })
  })

  // æ£€æŸ¥å¿«æ·é”®ç»„åˆ
  useEffect(() => {
    const keys = Array.from(pressedKeys).sort().join('+')

    if (keys === 'Control+s') {
      setLastShortcut('ä¿å­˜ (Ctrl+S)')
    } else if (keys === 'Control+z') {
      setLastShortcut('æ’¤é”€ (Ctrl+Z)')
    } else if (keys === 'Control+y') {
      setLastShortcut('é‡åš (Ctrl+Y)')
    } else if (keys === 'Control+c') {
      setLastShortcut('å¤åˆ¶ (Ctrl+C)')
    } else if (keys === 'Control+v') {
      setLastShortcut('ç²˜è´´ (Ctrl+V)')
    }
  }, [pressedKeys])

  return (
    <div style={{ padding: '2rem', textAlign: 'center' }}>
      <h3>å¿«æ·é”®ç®¡ç†å™¨</h3>

      <div style={{ marginBottom: '1rem' }}>
        <strong>å½“å‰æŒ‰ä¸‹çš„é”®:</strong>
        <div style={{
          padding: '1rem',
          backgroundColor: '#f5f5f5',
          borderRadius: '4px',
          marginTop: '0.5rem',
          minHeight: '2rem',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          gap: '0.5rem'
        }}>
          {pressedKeys.size === 0 ? (
            <span style={{ color: '#999' }}>æ— </span>
          ) : (
            Array.from(pressedKeys).map(key => (
              <span key={key} style={{
                padding: '0.25rem 0.5rem',
                backgroundColor: '#1890ff',
                color: 'white',
                borderRadius: '4px',
                fontSize: '0.875rem'
              }}>
                {key}
              </span>
            ))
          )}
        </div>
      </div>

      {lastShortcut && (
        <div style={{
          padding: '1rem',
          backgroundColor: '#e6f7ff',
          borderRadius: '4px',
          marginBottom: '1rem'
        }}>
          <strong>æ‰§è¡Œå¿«æ·é”®:</strong> {lastShortcut}
        </div>
      )}

      <div style={{
        fontSize: '0.875rem',
        color: '#666',
        textAlign: 'left',
        maxWidth: '300px',
        margin: '0 auto'
      }}>
        <strong>æ”¯æŒçš„å¿«æ·é”®:</strong>
        <ul>
          <li>Ctrl+S - ä¿å­˜</li>
          <li>Ctrl+Z - æ’¤é”€</li>
          <li>Ctrl+Y - é‡åš</li>
          <li>Ctrl+C - å¤åˆ¶</li>
          <li>Ctrl+V - ç²˜è´´</li>
        </ul>
      </div>
    </div>
  )
}
```

## API å‚è€ƒ

### å‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| eventType | KeyboardEventType | - | é”®ç›˜äº‹ä»¶ç±»å‹ |
| handler | (event: KeyboardEvent) => void | - | äº‹ä»¶å¤„ç†å‡½æ•° |
| targetKey | string | undefined | å¯é€‰çš„ç‰¹å®šæŒ‰é”®è¿‡æ»¤ |

### äº‹ä»¶ç±»å‹

```tsx
type KeyboardEventType = 'keydown' | 'keyup' | 'keypress'
```

### ä½¿ç”¨ç¤ºä¾‹

```tsx
import { useKeyboardEvent } from 'arrow-hooks'

// ç›‘å¬æ‰€æœ‰æŒ‰é”®
useKeyboardEvent('keydown', (e) => {
  console.log('æŒ‰ä¸‹:', e.key)
})

// ç›‘å¬ç‰¹å®šæŒ‰é”®
useKeyboardEvent('keydown', () => {
  console.log('æŒ‰ä¸‹äº†ç©ºæ ¼é”®')
}, ' ')

// ç›‘å¬æŒ‰é”®é‡Šæ”¾
useKeyboardEvent('keyup', (e) => {
  console.log('é‡Šæ”¾:', e.key)
})

// ç›‘å¬ keypress äº‹ä»¶ï¼ˆä¸»è¦ç”¨äºå­—ç¬¦è¾“å…¥ï¼‰
useKeyboardEvent('keypress', (e) => {
  console.log('å­—ç¬¦è¾“å…¥:', e.key)
})
```

### å¸¸ç”¨æŒ‰é”®å€¼

```tsx
// ç‰¹æ®Šé”®
'Escape'     // ESC é”®
'Enter'      // å›è½¦é”®
'Tab'        // Tab é”®
'Backspace'  // é€€æ ¼é”®
'Delete'     // åˆ é™¤é”®
' '          // ç©ºæ ¼é”®

// æ–¹å‘é”®
'ArrowUp'    // ä¸Šæ–¹å‘é”®
'ArrowDown'  // ä¸‹æ–¹å‘é”®
'ArrowLeft'  // å·¦æ–¹å‘é”®
'ArrowRight' // å³æ–¹å‘é”®

// ä¿®é¥°é”®
'Control'    // Ctrl é”®
'Shift'      // Shift é”®
'Alt'        // Alt é”®
'Meta'       // Windows é”®/Cmd é”®

// å­—æ¯å’Œæ•°å­—
'a', 'b', 'c'...  // å­—æ¯é”®
'1', '2', '3'...  // æ•°å­—é”®

// åŠŸèƒ½é”®
'F1', 'F2', 'F3'...  // åŠŸèƒ½é”®
```

## æ³¨æ„äº‹é¡¹

- **äº‹ä»¶å†’æ³¡**: é”®ç›˜äº‹ä»¶ä¼šå†’æ³¡ï¼Œå¯èƒ½è¢«å¤šä¸ªç›‘å¬å™¨æ•è·
- **ä¿®é¥°é”®æ£€æµ‹**: å¯ä»¥é€šè¿‡ `event.ctrlKey`ã€`event.shiftKey` ç­‰å±æ€§æ£€æµ‹ä¿®é¥°é”®çŠ¶æ€
- **é˜²æ­¢é»˜è®¤è¡Œä¸º**: åœ¨éœ€è¦æ—¶ä½¿ç”¨ `event.preventDefault()` é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º
- **æ€§èƒ½è€ƒè™‘**: å¯¹äºé«˜é¢‘é”®ç›˜äº‹ä»¶ï¼Œå»ºè®®ä½¿ç”¨é˜²æŠ–æˆ–èŠ‚æµ
- **é”®å€¼æ ‡å‡†åŒ–**: ä¸åŒæµè§ˆå™¨å’Œç³»ç»Ÿçš„é”®å€¼å¯èƒ½ç•¥æœ‰å·®å¼‚
- **ç„¦ç‚¹ä¾èµ–**: é”®ç›˜äº‹ä»¶é€šå¸¸éœ€è¦é¡µé¢æˆ–å…ƒç´ å…·æœ‰ç„¦ç‚¹æ‰èƒ½è§¦å‘
- **ç»„åˆé”®å¤„ç†**: å¤æ‚çš„ç»„åˆé”®éœ€è¦ç»“åˆæŒ‰é”®çŠ¶æ€ç®¡ç†æ¥å®ç°