---
title: useMediaQuery
description: ç”¨äºå“åº”åª’ä½“æŸ¥è¯¢å˜åŒ–çš„ React Hook
---

import { MediaQueryExample } from '@/components/examples';

# useMediaQuery

ç”¨äºå“åº”åª’ä½“æŸ¥è¯¢å˜åŒ–çš„ React Hookï¼Œæä¾›å®æ—¶çš„åª’ä½“æŸ¥è¯¢åŒ¹é…çŠ¶æ€ï¼Œæ”¯æŒæ‰€æœ‰æ ‡å‡†çš„ CSS åª’ä½“æŸ¥è¯¢è¯­æ³•ï¼Œå¸¸ç”¨äºå“åº”å¼è®¾è®¡ã€ç³»ç»Ÿåå¥½æ£€æµ‹å’Œè®¾å¤‡ç‰¹å¾è¯†åˆ«ã€‚

## åœ¨çº¿æ¼”ç¤º

<MediaQueryExample />

## åŸºæœ¬ç”¨æ³•

```tsx tab="React å‡½æ•°ç»„ä»¶"
import { useMediaQuery } from 'arrow-hooks'

function App() {
  const isMobile = useMediaQuery('(max-width: 768px)')

  return (
    <div>
      {isMobile ? (
        <div>ç§»åŠ¨ç«¯å¸ƒå±€</div>
      ) : (
        <div>æ¡Œé¢ç«¯å¸ƒå±€</div>
      )}
    </div>
  )
}
```

## å…¶ä»–åœºæ™¯

### 1. å“åº”å¼å¸ƒå±€

æ ¹æ®å±å¹•å°ºå¯¸åˆ‡æ¢ä¸åŒçš„å¸ƒå±€æ¨¡å¼ï¼š

```tsx
import { useMediaQuery } from 'arrow-hooks'

function ResponsiveComponent() {
  const isLargeScreen = useMediaQuery('(min-width: 1024px)')
  const isMediumScreen = useMediaQuery('(min-width: 768px) and (max-width: 1023px)')
  const isSmallScreen = useMediaQuery('(max-width: 767px)')

  return (
    <div>
      {isLargeScreen && (
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '1rem' }}>
          {/* 4åˆ—å¸ƒå±€ */}
          <div>ä¾§è¾¹æ </div>
          <div>ä¸»å†…å®¹</div>
          <div>é™„åŠ å†…å®¹</div>
          <div>å¹¿å‘ŠåŒºåŸŸ</div>
        </div>
      )}

      {isMediumScreen && (
        <div style={{ display: 'grid', gridTemplateColumns: '1fr 3fr', gap: '1rem' }}>
          {/* 2åˆ—å¸ƒå±€ */}
          <div>ä¾§è¾¹æ </div>
          <div>ä¸»å†…å®¹</div>
        </div>
      )}

      {isSmallScreen && (
        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
          {/* å•åˆ—å¸ƒå±€ */}
          <div>ä¸»å†…å®¹</div>
          <div>ä¾§è¾¹æ </div>
        </div>
      )}
    </div>
  )
}
```

### 2. ç³»ç»Ÿä¸»é¢˜æ£€æµ‹

æ£€æµ‹ç”¨æˆ·çš„ç³»ç»Ÿä¸»é¢˜åå¥½ï¼š

```tsx
import { useMediaQuery } from 'arrow-hooks'

function ThemeAwareComponent() {
  const prefersDark = useMediaQuery('(prefers-color-scheme: dark)')

  const theme = {
    backgroundColor: prefersDark ? '#1a1a1a' : '#ffffff',
    color: prefersDark ? '#ffffff' : '#000000',
    borderColor: prefersDark ? '#333333' : '#e0e0e0'
  }

  return (
    <div
      style={{
        ...theme,
        padding: '2rem',
        borderRadius: '8px',
        border: `1px solid ${theme.borderColor}`,
        transition: 'all 0.3s ease'
      }}
    >
      <h3>è‡ªé€‚åº”ä¸»é¢˜ç»„ä»¶</h3>
      <p>
        å½“å‰ä¸»é¢˜: {prefersDark ? 'ğŸŒ™ æ·±è‰²æ¨¡å¼' : 'â˜€ï¸ æµ…è‰²æ¨¡å¼'}
      </p>
      <p>
        è¿™ä¸ªç»„ä»¶ä¼šæ ¹æ®ç³»ç»Ÿä¸»é¢˜åå¥½è‡ªåŠ¨è°ƒæ•´å¤–è§‚
      </p>
    </div>
  )
}
```

### 3. è®¾å¤‡ç‰¹å¾æ£€æµ‹

æ£€æµ‹è®¾å¤‡çš„ç‰©ç†ç‰¹å¾å’Œäº¤äº’èƒ½åŠ›ï¼š

```tsx
import { useMediaQuery } from 'arrow-hooks'

function DeviceAwareComponent() {
  const canHover = useMediaQuery('(hover: hover)')
  const isRetina = useMediaQuery('(min-resolution: 2dppx)')
  const isLandscape = useMediaQuery('(orientation: landscape)')
  const isTouchDevice = useMediaQuery('(pointer: coarse)')

  return (
    <div style={{ padding: '1rem' }}>
      <h3>è®¾å¤‡ç‰¹å¾æ£€æµ‹</h3>

      <div style={{ marginBottom: '1rem' }}>
        <h4>äº¤äº’èƒ½åŠ›</h4>
        {canHover ? (
          <div>
            <p>âœ… è®¾å¤‡æ”¯æŒæ‚¬åœæ“ä½œ</p>
            <button
              style={{
                padding: '0.5rem 1rem',
                backgroundColor: '#1890ff',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
                transition: 'all 0.3s ease'
              }}
              onMouseEnter={(e) => {
                e.currentTarget.style.backgroundColor = '#096dd9'
              }}
              onMouseLeave={(e) => {
                e.currentTarget.style.backgroundColor = '#1890ff'
              }}
            >
              æ‚¬åœè¯•è¯•
            </button>
          </div>
        ) : (
          <div>
            <p>ğŸ“± è§¦æ‘¸è®¾å¤‡ï¼Œæ— æ‚¬åœåŠŸèƒ½</p>
            <button
              style={{
                padding: '1rem 2rem', // è§¦æ‘¸è®¾å¤‡ä½¿ç”¨æ›´å¤§çš„ç‚¹å‡»åŒºåŸŸ
                backgroundColor: '#1890ff',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                fontSize: '1.1rem'
              }}
            >
              ç‚¹å‡»æŒ‰é’®
            </button>
          </div>
        )}
      </div>

      <div style={{ marginBottom: '1rem' }}>
        <h4>æ˜¾ç¤ºç‰¹å¾</h4>
        <p>å±å¹•åˆ†è¾¨ç‡: {isRetina ? 'ğŸ¯ é«˜åˆ†è¾¨ç‡ (Retina)' : 'ğŸ“º æ ‡å‡†åˆ†è¾¨ç‡'}</p>
        <p>å±å¹•æ–¹å‘: {isLandscape ? 'ğŸ“ æ¨ªå±' : 'ğŸ“± ç«–å±'}</p>
      </div>

      <div>
        <h4>è¾“å…¥æ–¹å¼</h4>
        <p>ä¸»è¦è¾“å…¥æ–¹å¼: {isTouchDevice ? 'ğŸ‘† è§¦æ‘¸' : 'ğŸ–±ï¸ é¼ æ ‡/è§¦æ§æ¿'}</p>
      </div>
    </div>
  )
}
```

## API å‚è€ƒ

### å‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| query | string | - | CSS åª’ä½“æŸ¥è¯¢å­—ç¬¦ä¸² |

### è¿”å›å€¼

| ç±»å‹ | æè¿° |
|------|------|
| boolean | å½“å‰åª’ä½“æŸ¥è¯¢æ˜¯å¦åŒ¹é… |

### ç±»å‹å®šä¹‰

```tsx
function useMediaQuery(query: string): boolean
```

### å¸¸ç”¨åª’ä½“æŸ¥è¯¢ç¤ºä¾‹

```tsx
import { useMediaQuery } from 'arrow-hooks'

// å±å¹•å°ºå¯¸
const isMobile = useMediaQuery('(max-width: 767px)')
const isTablet = useMediaQuery('(min-width: 768px) and (max-width: 1023px)')
const isDesktop = useMediaQuery('(min-width: 1024px)')

// ç³»ç»Ÿåå¥½
const prefersDark = useMediaQuery('(prefers-color-scheme: dark)')
const prefersLight = useMediaQuery('(prefers-color-scheme: light)')
const prefersReducedMotion = useMediaQuery('(prefers-reduced-motion: reduce)')
const prefersHighContrast = useMediaQuery('(prefers-contrast: high)')

// è®¾å¤‡ç‰¹å¾
const isRetina = useMediaQuery('(min-resolution: 2dppx)')
const isLandscape = useMediaQuery('(orientation: landscape)')
const isPortrait = useMediaQuery('(orientation: portrait)')

// äº¤äº’èƒ½åŠ›
const canHover = useMediaQuery('(hover: hover)')
const canNotHover = useMediaQuery('(hover: none)')
const hasFinePointer = useMediaQuery('(pointer: fine)')
const hasCoarsePointer = useMediaQuery('(pointer: coarse)')

// åª’ä½“ç±»å‹
const isScreen = useMediaQuery('screen')
const isPrint = useMediaQuery('print')

// å¤åˆæŸ¥è¯¢
const isMobilePortrait = useMediaQuery('(max-width: 767px) and (orientation: portrait)')
const isDesktopWithHover = useMediaQuery('(min-width: 1024px) and (hover: hover)')
```

## æ³¨æ„äº‹é¡¹

- **å…¼å®¹æ€§**: æ”¯æŒæ–°æ—§ç‰ˆæœ¬çš„ MediaQueryList APIï¼Œå…¼å®¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨
- **å®æ—¶æ›´æ–°**: åª’ä½“æŸ¥è¯¢çŠ¶æ€å˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ç»„ä»¶
- **SSR å…¼å®¹**: åœ¨æœåŠ¡ç«¯æ¸²æŸ“ç¯å¢ƒä¸‹è¿”å› `false`
- **æ€§èƒ½ä¼˜åŒ–**: å†…éƒ¨ç¼“å­˜ MediaQueryList å®ä¾‹ï¼Œé¿å…é‡å¤åˆ›å»º
- **è‡ªåŠ¨æ¸…ç†**: ç»„ä»¶å¸è½½æ—¶ä¼šè‡ªåŠ¨ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
- **è¯­æ³•æ”¯æŒ**: æ”¯æŒæ‰€æœ‰æ ‡å‡†çš„ CSS åª’ä½“æŸ¥è¯¢è¯­æ³•å’Œç‰¹æ€§
- **ç³»ç»Ÿåå¥½**: `prefers-*` æŸ¥è¯¢éœ€è¦ç”¨æˆ·åœ¨ç³»ç»Ÿè®¾ç½®ä¸­è¿›è¡Œé…ç½®æ‰ä¼šç”Ÿæ•ˆ