---
title: useWindowSize
description: 用于监听和获取窗口大小的 React Hook
---

import { WindowSizeExample } from '@/components/examples';

# useWindowSize

用于监听和获取窗口大小的 React Hook，提供实时的窗口宽度和高度信息，支持防抖优化以提升性能，常用于响应式布局和窗口尺寸相关的交互功能。

## 在线演示

<WindowSizeExample />

## 基本用法

```tsx tab="React 函数组件"
import { useWindowSize } from 'arrow-hooks'

function App() {
  const { width, height } = useWindowSize()

  // 计算屏幕分类
  const getScreenType = (w: number) => {
    if (w < 576) return { type: '手机', color: '#ff4d4f', icon: '📱' }
    if (w < 768) return { type: '平板', color: '#fa8c16', icon: '📱' }
    if (w < 992) return { type: '小屏幕', color: '#faad14', icon: '💻' }
    if (w < 1200) return { type: '中屏幕', color: '#52c41a', icon: '🖥️' }
    return { type: '大屏幕', color: '#1890ff', icon: '🖥️' }
  }

  const screenInfo = getScreenType(width)
  const aspectRatio = (width / height).toFixed(2)

  return (
    <div style={{ padding: '1rem' }}>
      {/* 当前窗口尺寸 */}
      <div style={{ marginBottom: '1.5rem' }}>
        <h4>📏 当前窗口尺寸</h4>
        <div style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
          gap: '0.5rem',
          marginBottom: '1rem'
        }}>
          <div style={{
            padding: '0.75rem',
            backgroundColor: '#f0f8ff',
            borderRadius: '4px',
            textAlign: 'center'
          }}>
            <div style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#1890ff' }}>
              {width}
            </div>
            <div style={{ fontSize: '0.875rem', color: '#666' }}>宽度 (px)</div>
          </div>
          <div style={{
            padding: '0.75rem',
            backgroundColor: '#f6ffed',
            borderRadius: '4px',
            textAlign: 'center'
          }}>
            <div style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#52c41a' }}>
              {height}
            </div>
            <div style={{ fontSize: '0.875rem', color: '#666' }}>高度 (px)</div>
          </div>
          <div style={{
            padding: '0.75rem',
            backgroundColor: '#fff7e6',
            borderRadius: '4px',
            textAlign: 'center'
          }}>
            <div style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#fa8c16' }}>
              {aspectRatio}
            </div>
            <div style={{ fontSize: '0.875rem', color: '#666' }}>宽高比</div>
          </div>
        </div>
      </div>

      {/* 屏幕类型识别 */}
      <div style={{ marginBottom: '1.5rem' }}>
        <h4>📱 屏幕类型识别</h4>
        <div style={{
          padding: '1rem',
          backgroundColor: screenInfo.color + '15',
          border: `2px solid ${screenInfo.color}`,
          borderRadius: '8px',
          textAlign: 'center'
        }}>
          <div style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>
            {screenInfo.icon}
          </div>
          <div style={{ fontSize: '1.25rem', fontWeight: 'bold', color: screenInfo.color }}>
            {screenInfo.type}
          </div>
          <div style={{ fontSize: '0.875rem', color: '#666', marginTop: '0.5rem' }}>
            当前窗口宽度: {width}px
          </div>
        </div>
      </div>

      {/* 响应式布局演示 */}
      <div>
        <h4>📐 响应式布局演示</h4>
        <div style={{
          display: 'grid',
          gridTemplateColumns: width > 768 ? 'repeat(3, 1fr)' : width > 480 ? 'repeat(2, 1fr)' : '1fr',
          gap: '0.75rem'
        }}>
          {[1, 2, 3].map(item => (
            <div key={item} style={{
              padding: '1rem',
              backgroundColor: '#f5f5f5',
              borderRadius: '4px',
              textAlign: 'center',
              border: '1px solid #e0e0e0'
            }}>
              <div style={{ fontSize: '1.5rem', marginBottom: '0.5rem' }}>📦</div>
              <div style={{ fontSize: '0.875rem', color: '#666' }}>卡片 {item}</div>
            </div>
          ))}
        </div>
        <p style={{ fontSize: '0.875rem', color: '#666', marginTop: '0.75rem' }}>
          {width > 768 ? '🖥️ 当前显示 3 列布局' :
           width > 480 ? '📱 当前显示 2 列布局' :
           '📱 当前显示单列布局'}
        </p>
      </div>

      <p style={{ fontSize: '0.875rem', color: '#666', marginTop: '1rem' }}>
        💡 调整浏览器窗口大小查看实时变化
      </p>
    </div>
  )
}
```

## 其他场景

### 1. 虚拟滚动优化

根据窗口高度计算可见项目数量：

```tsx
import { useWindowSize } from 'arrow-hooks'
import { useMemo } from 'react'

function VirtualList({ items }: { items: string[] }) {
  const { height } = useWindowSize()

  // 计算可见项目数量
  const visibleCount = useMemo(() => {
    const itemHeight = 50 // 每项高度
    const containerHeight = height - 200 // 减去头部和其他元素高度
    return Math.ceil(containerHeight / itemHeight) + 2 // 多渲染2项缓冲
  }, [height])

  return (
    <div>
      <h3>虚拟滚动列表</h3>
      <div
        style={{
          height: height - 200,
          overflowY: 'auto',
          border: '1px solid #d9d9d9',
          borderRadius: '4px'
        }}
      >
        {items.slice(0, visibleCount).map((item, index) => (
          <div
            key={index}
            style={{
              height: '50px',
              padding: '0 1rem',
              display: 'flex',
              alignItems: 'center',
              borderBottom: '1px solid #f0f0f0'
            }}
          >
            {item}
          </div>
        ))}
      </div>
      <p style={{ fontSize: '0.875rem', color: '#666' }}>
        显示 {visibleCount} / {items.length} 项
      </p>
    </div>
  )
}
```

## API 参考

### 参数

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| delay | number | 200 | 防抖延迟时间（毫秒） |

### 返回值

| 属性 | 类型 | 描述 |
|------|------|------|
| width | number | 当前窗口宽度（像素） |
| height | number | 当前窗口高度（像素） |

### 类型定义

```tsx
type WindowSize = {
  width: number
  height: number
}

function useWindowSize(delay?: number): WindowSize
```

### 使用示例

```tsx
import { useWindowSize } from 'arrow-hooks'

// 基础用法（默认 200ms 防抖）
const { width, height } = useWindowSize()

// 自定义防抖时间
const { width: fastWidth, height: fastHeight } = useWindowSize(100)
const { width: slowWidth, height: slowHeight } = useWindowSize(500)

// 计算宽高比
const aspectRatio = (width / height).toFixed(2)

// 判断屏幕方向
const isLandscape = width > height
const isPortrait = height > width
```

## 注意事项

- **防抖优化**: 默认使用 200ms 防抖延迟，避免频繁的窗口大小变化导致性能问题
- **SSR 兼容**: 在服务端渲染环境下返回默认值 `{ width: 0, height: 0 }`
- **初始化**: 组件挂载后会立即获取当前窗口尺寸
- **内存管理**: 组件卸载时会自动清理事件监听器和防抖函数
- **性能考虑**: 对于高频更新场景，建议增加防抖延迟时间
- **兼容性**: 基于 `window.innerWidth` 和 `window.innerHeight`，兼容所有现代浏览器