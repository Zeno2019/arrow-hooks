---
title: useWindowSize
description: ç”¨äºç›‘å¬å’Œè·å–çª—å£å¤§å°çš„ React Hook
---

import { WindowSizeExample } from '@/components/examples';

# useWindowSize

ç”¨äºç›‘å¬å’Œè·å–çª—å£å¤§å°çš„ React Hookï¼Œæä¾›å®æ—¶çš„çª—å£å®½åº¦å’Œé«˜åº¦ä¿¡æ¯ï¼Œæ”¯æŒé˜²æŠ–ä¼˜åŒ–ä»¥æå‡æ€§èƒ½ï¼Œå¸¸ç”¨äºå“åº”å¼å¸ƒå±€å’Œçª—å£å°ºå¯¸ç›¸å…³çš„äº¤äº’åŠŸèƒ½ã€‚

## åœ¨çº¿æ¼”ç¤º

<WindowSizeExample />

## åŸºæœ¬ç”¨æ³•

```tsx tab="React å‡½æ•°ç»„ä»¶"
import { useWindowSize } from 'arrow-hooks'

function App() {
  const { width, height } = useWindowSize()

  return (
    <div>
      <p>çª—å£å®½åº¦: {width}px</p>
      <p>çª—å£é«˜åº¦: {height}px</p>
    </div>
  )
}
```

## ä½¿ç”¨åœºæ™¯

### 1. å“åº”å¼å¸ƒå±€

æ ¹æ®çª—å£å°ºå¯¸åŠ¨æ€è°ƒæ•´å¸ƒå±€ï¼š

```tsx
import { useWindowSize } from 'arrow-hooks'

function ResponsiveLayout() {
  const { width } = useWindowSize()

  // æ ¹æ®å±å¹•å®½åº¦ç¡®å®šåˆ—æ•°
  const getColumns = () => {
    if (width < 576) return 1
    if (width < 768) return 2
    if (width < 1200) return 3
    return 4
  }

  const columns = getColumns()

  return (
    <div
      style={{
        display: 'grid',
        gridTemplateColumns: `repeat(${columns}, 1fr)`,
        gap: '1rem'
      }}
    >
      {Array.from({ length: 12 }, (_, i) => (
        <div key={i} style={{ padding: '1rem', backgroundColor: '#f5f5f5' }}>
          å¡ç‰‡ {i + 1}
        </div>
      ))}
    </div>
  )
}
```

### 2. å±å¹•ç±»å‹æ£€æµ‹

æ£€æµ‹å½“å‰å±å¹•ç±»å‹ä»¥åº”ç”¨ä¸åŒçš„æ ·å¼ï¼š

```tsx
import { useWindowSize } from 'arrow-hooks'

function ScreenTypeIndicator() {
  const { width } = useWindowSize()

  const getScreenType = () => {
    if (width < 576) return { type: 'æ‰‹æœº', color: '#ff4d4f' }
    if (width < 768) return { type: 'å¹³æ¿', color: '#fa8c16' }
    if (width < 992) return { type: 'å°å±å¹•', color: '#faad14' }
    if (width < 1200) return { type: 'ä¸­å±å¹•', color: '#52c41a' }
    return { type: 'å¤§å±å¹•', color: '#1890ff' }
  }

  const { type, color } = getScreenType()

  return (
    <div
      style={{
        padding: '1rem',
        backgroundColor: color + '15',
        border: `2px solid ${color}`,
        borderRadius: '8px',
        textAlign: 'center'
      }}
    >
      <h3 style={{ color, margin: 0 }}>å½“å‰è®¾å¤‡: {type}</h3>
      <p style={{ margin: '0.5rem 0 0 0' }}>çª—å£å®½åº¦: {width}px</p>
    </div>
  )
}
```

### 3. è‡ªé€‚åº”ç»„ä»¶å¤§å°

æ ¹æ®çª—å£å¤§å°åŠ¨æ€è°ƒæ•´ç»„ä»¶å°ºå¯¸ï¼š

```tsx
import { useWindowSize } from 'arrow-hooks'

function AdaptiveChart() {
  const { width, height } = useWindowSize()

  // è®¡ç®—å›¾è¡¨å°ºå¯¸ï¼ˆä¿ç•™è¾¹è·ï¼‰
  const chartWidth = Math.min(width - 40, 800)
  const chartHeight = Math.min(height * 0.6, 400)

  return (
    <div style={{ padding: '20px' }}>
      <h3>è‡ªé€‚åº”å›¾è¡¨</h3>
      <div
        style={{
          width: chartWidth,
          height: chartHeight,
          backgroundColor: '#f0f2f5',
          border: '1px solid #d9d9d9',
          borderRadius: '4px',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          margin: '0 auto'
        }}
      >
        <div style={{ textAlign: 'center', color: '#666' }}>
          <div style={{ fontSize: '1.5rem', marginBottom: '0.5rem' }}>ğŸ“Š</div>
          <div>å›¾è¡¨åŒºåŸŸ</div>
          <div style={{ fontSize: '0.875rem', marginTop: '0.5rem' }}>
            {chartWidth} Ã— {chartHeight}
          </div>
        </div>
      </div>
    </div>
  )
}
```

### 4. ç§»åŠ¨ç«¯ä¼˜åŒ–

ä¸ºç§»åŠ¨ç«¯è®¾å¤‡æä¾›ç‰¹æ®Šçš„äº¤äº’ä½“éªŒï¼š

```tsx
import { useWindowSize } from 'arrow-hooks'
import { useState } from 'react'

function MobileOptimizedComponent() {
  const { width } = useWindowSize()
  const [isMenuOpen, setIsMenuOpen] = useState(false)
  const isMobile = width < 768

  return (
    <div>
      {/* ç§»åŠ¨ç«¯ä½¿ç”¨æ±‰å ¡èœå• */}
      {isMobile ? (
        <div>
          <button
            onClick={() => setIsMenuOpen(!isMenuOpen)}
            style={{
              padding: '0.5rem',
              backgroundColor: '#1890ff',
              color: 'white',
              border: 'none',
              borderRadius: '4px'
            }}
          >
            {isMenuOpen ? 'âœ•' : 'â˜°'} èœå•
          </button>
          {isMenuOpen && (
            <div
              style={{
                position: 'fixed',
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                zIndex: 1000,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center'
              }}
            >
              <div
                style={{
                  backgroundColor: 'white',
                  padding: '2rem',
                  borderRadius: '8px',
                  width: '80%',
                  maxWidth: '300px'
                }}
              >
                <h3>ç§»åŠ¨èœå•</h3>
                <ul style={{ listStyle: 'none', padding: 0 }}>
                  <li style={{ padding: '0.5rem 0' }}>é¦–é¡µ</li>
                  <li style={{ padding: '0.5rem 0' }}>å…³äº</li>
                  <li style={{ padding: '0.5rem 0' }}>è”ç³»</li>
                </ul>
              </div>
            </div>
          )}
        </div>
      ) : (
        /* æ¡Œé¢ç«¯ä½¿ç”¨æ°´å¹³èœå• */
        <nav
          style={{
            display: 'flex',
            gap: '2rem',
            padding: '1rem',
            backgroundColor: '#f5f5f5'
          }}
        >
          <a href="/">é¦–é¡µ</a>
          <a href="/about">å…³äº</a>
          <a href="/contact">è”ç³»</a>
        </nav>
      )}
    </div>
  )
}
```

### 5. è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–

æ ¹æ®çª—å£é«˜åº¦è®¡ç®—å¯è§é¡¹ç›®æ•°é‡ï¼š

```tsx
import { useWindowSize } from 'arrow-hooks'
import { useMemo } from 'react'

function VirtualList({ items }: { items: string[] }) {
  const { height } = useWindowSize()

  // è®¡ç®—å¯è§é¡¹ç›®æ•°é‡
  const visibleCount = useMemo(() => {
    const itemHeight = 50 // æ¯é¡¹é«˜åº¦
    const containerHeight = height - 200 // å‡å»å¤´éƒ¨å’Œå…¶ä»–å…ƒç´ é«˜åº¦
    return Math.ceil(containerHeight / itemHeight) + 2 // å¤šæ¸²æŸ“2é¡¹ç¼“å†²
  }, [height])

  return (
    <div>
      <h3>è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨</h3>
      <div
        style={{
          height: height - 200,
          overflowY: 'auto',
          border: '1px solid #d9d9d9',
          borderRadius: '4px'
        }}
      >
        {items.slice(0, visibleCount).map((item, index) => (
          <div
            key={index}
            style={{
              height: '50px',
              padding: '0 1rem',
              display: 'flex',
              alignItems: 'center',
              borderBottom: '1px solid #f0f0f0'
            }}
          >
            {item}
          </div>
        ))}
      </div>
      <p style={{ fontSize: '0.875rem', color: '#666' }}>
        æ˜¾ç¤º {visibleCount} / {items.length} é¡¹
      </p>
    </div>
  )
}
```

## API å‚è€ƒ

### å‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| delay | number | 200 | é˜²æŠ–å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |

### è¿”å›å€¼

| å±æ€§ | ç±»å‹ | æè¿° |
|------|------|------|
| width | number | å½“å‰çª—å£å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| height | number | å½“å‰çª—å£é«˜åº¦ï¼ˆåƒç´ ï¼‰ |

### ç±»å‹å®šä¹‰

```tsx
type WindowSize = {
  width: number
  height: number
}

function useWindowSize(delay?: number): WindowSize
```

### ä½¿ç”¨ç¤ºä¾‹

```tsx
import { useWindowSize } from 'arrow-hooks'

// åŸºç¡€ç”¨æ³•ï¼ˆé»˜è®¤ 200ms é˜²æŠ–ï¼‰
const { width, height } = useWindowSize()

// è‡ªå®šä¹‰é˜²æŠ–æ—¶é—´
const { width: fastWidth, height: fastHeight } = useWindowSize(100)
const { width: slowWidth, height: slowHeight } = useWindowSize(500)

// è®¡ç®—å®½é«˜æ¯”
const aspectRatio = (width / height).toFixed(2)

// åˆ¤æ–­å±å¹•æ–¹å‘
const isLandscape = width > height
const isPortrait = height > width
```

## æ³¨æ„äº‹é¡¹

- **é˜²æŠ–ä¼˜åŒ–**: é»˜è®¤ä½¿ç”¨ 200ms é˜²æŠ–å»¶è¿Ÿï¼Œé¿å…é¢‘ç¹çš„çª—å£å¤§å°å˜åŒ–å¯¼è‡´æ€§èƒ½é—®é¢˜
- **SSR å…¼å®¹**: åœ¨æœåŠ¡ç«¯æ¸²æŸ“ç¯å¢ƒä¸‹è¿”å›é»˜è®¤å€¼ `{ width: 0, height: 0 }`
- **åˆå§‹åŒ–**: ç»„ä»¶æŒ‚è½½åä¼šç«‹å³è·å–å½“å‰çª—å£å°ºå¯¸
- **å†…å­˜ç®¡ç†**: ç»„ä»¶å¸è½½æ—¶ä¼šè‡ªåŠ¨æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’Œé˜²æŠ–å‡½æ•°
- **æ€§èƒ½è€ƒè™‘**: å¯¹äºé«˜é¢‘æ›´æ–°åœºæ™¯ï¼Œå»ºè®®å¢åŠ é˜²æŠ–å»¶è¿Ÿæ—¶é—´
- **å…¼å®¹æ€§**: åŸºäº `window.innerWidth` å’Œ `window.innerHeight`ï¼Œå…¼å®¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨